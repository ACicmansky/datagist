## Completed
- **Authentication:**
  - Google OAuth with offline access (Refresh Token storage).
  - Login Page and Google Sign-In Button.
  - Landing Page with "Get Started" flow.
- **Property Onboarding:**
  - `OnboardingWizard` component for selecting GA4 properties.
  - Server Actions to save property and report settings.
## Completed
- **Authentication:**
  - Google OAuth with offline access (Refresh Token storage).
  - Login Page and Google Sign-In Button.
  - Landing Page with "Get Started" flow.
- **Property Onboarding:**
  - `OnboardingWizard` component for selecting GA4 properties.
  - Server Actions to save property and report settings.
  - Google API Helper (`listGA4Properties`) with unit tests.
- **Intelligence Engine (Phase 4):**
  - GA4 data fetching (`src/lib/ga4.ts`).
  - AI analysis using Gemini 2.5 Flash Lite (`src/lib/ai.ts`).
  - Manual report generation Server Action.
  - Dashboard UI with report list and trigger button.
- **Insight Quality & Email Delivery (Phase 5):**
  - Enriched GA4 data fetching: Overview, Top Content, Top Sources (parallel requests).
  - Upgraded AI prompt with "Senior Data Analyst" persona.
  - **TOON Format Refactor:** AI engine now uses TOON for efficient I/O with LLMs.
  - **Structured Output:** AI returns `AIAnalysisResult` object instead of HTML.
  - Email integration using Resend (`src/lib/email.ts`).
  - Report email delivery integrated into dashboard actions.
- **Structured Data Presentation Layer:**
  - Database: Added `ai_result` (JSONB) column to `reports` table.
  - Email Renderer: `src/lib/renderers/email-renderer.ts` generates professional HTML.
  - Dashboard Component: `src/components/dashboard/report-card.tsx` displays reports.
  - Updated actions to save structured data and use new renderer.
- **Infrastructure:**
  - `proxy.ts` middleware for route protection and redirects.
  - `src/lib/validations/schemas.ts` for shared Zod schemas.
  - Biome and Vitest configuration.
  - Stripe Integration: `lib/stripe.ts` for checkout sessions.
  - Webhook Handler: `api/stripe/webhook` handles `checkout.session.completed` using Service Role to bypass RLS.
  - Guardrails: `savePropertyConfiguration` enforces limits (1 property, 30-day frequency) for Free users.
  - UI: `SubscribeButton` and conditional rendering on Dashboard.
- **Intelligence Upgrade & Marketing (Phase 8):**
  - **Grounding:** Enabled Google Search Grounding for Pro users in `src/lib/ai.ts`.
  - **Marketing Website:** Rewrote `src/app/page.tsx` with modern design (Hero, Features, Pricing).
  - **Legal Pages:** Created `src/app/privacy/page.tsx` and `src/app/terms/page.tsx`.
- **User Management & Settings (Phase 9):**
  - **Settings Page:** `/dashboard/settings` for managing subscription and report preferences.
  - **Stripe Portal:** Integrated Customer Portal for billing management.
  - **Navigation:** Shared `DashboardNav` with links to Dashboard and Settings.
  - **Danger Zone:** Property deletion with confirmation.
- **Lifecycle Management (Phase 10):**
  - **Cron Logic:** Updated `process-reports` to enforce property limits based on subscription tier (Graceful Degradation).
  - **Account Deletion:** Implemented full account wipe (Stripe + Supabase) via `deleteUserAccount`.
  - **UI:** Added "Delete Account" to Settings page with confirmation dialog.
- **Deployment Preparation:**
  - **Admin Client:** Centralized `createAdminClient` in `lib/supabase/admin.ts` for secure backend operations.
  - **Cron Configuration:** Updated `process-reports` route and added `vercel.json` for daily scheduling.
